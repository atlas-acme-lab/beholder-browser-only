!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["beholder-detection"]=e():t["beholder-detection"]=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=31)}([function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.NO_IL=e.NO=e.MemoryStream=e.Stream=void 0;var i=n(21),s=n(23),a=i.default(s.getPolyfill()),u={};function c(){}function l(t){for(var e=t.length,n=Array(e),r=0;r<e;++r)n[r]=t[r];return n}function f(t,e,n){try{return t.f(e)}catch(t){return n._e(t),u}}e.NO=u;var p={_n:c,_e:c,_c:c};function h(t){t._start=function(t){t.next=t._n,t.error=t._e,t.complete=t._c,this.start(t)},t._stop=t.stop}e.NO_IL=p;var d=function(){function t(t,e){this._stream=t,this._listener=e}return t.prototype.unsubscribe=function(){this._stream._remove(this._listener)},t}(),v=function(){function t(t){this._listener=t}return t.prototype.next=function(t){this._listener._n(t)},t.prototype.error=function(t){this._listener._e(t)},t.prototype.complete=function(){this._listener._c()},t}(),m=function(){function t(t){this.type="fromObservable",this.ins=t,this.active=!1}return t.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new v(t)),this.active||this._sub.unsubscribe()},t.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},t}(),y=function(){function t(t){this.type="merge",this.insArr=t,this.out=u,this.ac=0}return t.prototype._start=function(t){this.out=t;var e=this.insArr,n=e.length;this.ac=n;for(var r=0;r<n;r++)e[r]._add(this)},t.prototype._stop=function(){for(var t=this.insArr,e=t.length,n=0;n<e;n++)t[n]._remove(this);this.out=u},t.prototype._n=function(t){var e=this.out;e!==u&&e._n(t)},t.prototype._e=function(t){var e=this.out;e!==u&&e._e(t)},t.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===u)return;t._c()}},t}(),_=function(){function t(t,e,n){this.i=t,this.out=e,this.p=n,n.ils.push(this)}return t.prototype._n=function(t){var e=this.p,n=this.out;if(n!==u&&e.up(t,this.i)){var r=l(e.vals);n._n(r)}},t.prototype._e=function(t){var e=this.out;e!==u&&e._e(t)},t.prototype._c=function(){var t=this.p;t.out!==u&&0==--t.Nc&&t.out._c()},t}(),g=function(){function t(t){this.type="combine",this.insArr=t,this.out=u,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return t.prototype.up=function(t,e){var n=this.vals[e],r=this.Nn?n===u?--this.Nn:this.Nn:0;return this.vals[e]=t,0===r},t.prototype._start=function(t){this.out=t;var e=this.insArr,n=this.Nc=this.Nn=e.length,r=this.vals=new Array(n);if(0===n)t._n([]),t._c();else for(var o=0;o<n;o++)r[o]=u,e[o]._add(new _(o,t,this))},t.prototype._stop=function(){for(var t=this.insArr,e=t.length,n=this.ils,r=0;r<e;r++)t[r]._remove(n[r]);this.out=u,this.ils=[],this.vals=[]},t}(),b=function(){function t(t){this.type="fromArray",this.a=t}return t.prototype._start=function(t){for(var e=this.a,n=0,r=e.length;n<r;n++)t._n(e[n]);t._c()},t.prototype._stop=function(){},t}(),w=function(){function t(t){this.type="fromPromise",this.on=!1,this.p=t}return t.prototype._start=function(t){var e=this;this.on=!0,this.p.then((function(n){e.on&&(t._n(n),t._c())}),(function(e){t._e(e)})).then(c,(function(t){setTimeout((function(){throw t}))}))},t.prototype._stop=function(){this.on=!1},t}(),x=function(){function t(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return t.prototype._start=function(t){var e=this;this.intervalID=setInterval((function(){t._n(e.i++)}),this.period)},t.prototype._stop=function(){-1!==this.intervalID&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},t}(),E=function(){function t(t,e){this.type="debug",this.ins=t,this.out=u,this.s=c,this.l="","string"==typeof e?this.l=e:"function"==typeof e&&(this.s=e)}return t.prototype._start=function(t){this.out=t,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=u},t.prototype._n=function(t){var e=this.out;if(e!==u){var n=this.s,r=this.l;if(n!==c)try{n(t)}catch(t){e._e(t)}else r?console.log(r+":",t):console.log(t);e._n(t)}},t.prototype._e=function(t){var e=this.out;e!==u&&e._e(t)},t.prototype._c=function(){var t=this.out;t!==u&&t._c()},t}(),O=function(){function t(t,e){this.type="drop",this.ins=e,this.out=u,this.max=t,this.dropped=0}return t.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=u},t.prototype._n=function(t){var e=this.out;e!==u&&this.dropped++>=this.max&&e._n(t)},t.prototype._e=function(t){var e=this.out;e!==u&&e._e(t)},t.prototype._c=function(){var t=this.out;t!==u&&t._c()},t}(),M=function(){function t(t,e){this.out=t,this.op=e}return t.prototype._n=function(){this.op.end()},t.prototype._e=function(t){this.out._e(t)},t.prototype._c=function(){this.op.end()},t}(),S=function(){function t(t,e){this.type="endWhen",this.ins=e,this.out=u,this.o=t,this.oil=p}return t.prototype._start=function(t){this.out=t,this.o._add(this.oil=new M(t,this)),this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=u,this.oil=p},t.prototype.end=function(){var t=this.out;t!==u&&t._c()},t.prototype._n=function(t){var e=this.out;e!==u&&e._n(t)},t.prototype._e=function(t){var e=this.out;e!==u&&e._e(t)},t.prototype._c=function(){this.end()},t}(),T=function(){function t(t,e){this.type="filter",this.ins=e,this.out=u,this.f=t}return t.prototype._start=function(t){this.out=t,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=u},t.prototype._n=function(t){var e=this.out;if(e!==u){var n=f(this,t,e);n!==u&&n&&e._n(t)}},t.prototype._e=function(t){var e=this.out;e!==u&&e._e(t)},t.prototype._c=function(){var t=this.out;t!==u&&t._c()},t}(),A=function(){function t(t,e){this.out=t,this.op=e}return t.prototype._n=function(t){this.out._n(t)},t.prototype._e=function(t){this.out._e(t)},t.prototype._c=function(){this.op.inner=u,this.op.less()},t}(),j=function(){function t(t){this.type="flatten",this.ins=t,this.out=u,this.open=!0,this.inner=u,this.il=p}return t.prototype._start=function(t){this.out=t,this.open=!0,this.inner=u,this.il=p,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.inner!==u&&this.inner._remove(this.il),this.out=u,this.open=!0,this.inner=u,this.il=p},t.prototype.less=function(){var t=this.out;t!==u&&(this.open||this.inner!==u||t._c())},t.prototype._n=function(t){var e=this.out;if(e!==u){var n=this.inner,r=this.il;n!==u&&r!==p&&n._remove(r),(this.inner=t)._add(this.il=new A(e,this))}},t.prototype._e=function(t){var e=this.out;e!==u&&e._e(t)},t.prototype._c=function(){this.open=!1,this.less()},t}(),C=function(){function t(t,e,n){var r=this;this.type="fold",this.ins=n,this.out=u,this.f=function(e){return t(r.acc,e)},this.acc=this.seed=e}return t.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=u,this.acc=this.seed},t.prototype._n=function(t){var e=this.out;if(e!==u){var n=f(this,t,e);n!==u&&e._n(this.acc=n)}},t.prototype._e=function(t){var e=this.out;e!==u&&e._e(t)},t.prototype._c=function(){var t=this.out;t!==u&&t._c()},t}(),N=function(){function t(t){this.type="last",this.ins=t,this.out=u,this.has=!1,this.val=u}return t.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=u,this.val=u},t.prototype._n=function(t){this.has=!0,this.val=t},t.prototype._e=function(t){var e=this.out;e!==u&&e._e(t)},t.prototype._c=function(){var t=this.out;t!==u&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},t}(),I=function(){function t(t,e){this.type="map",this.ins=e,this.out=u,this.f=t}return t.prototype._start=function(t){this.out=t,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=u},t.prototype._n=function(t){var e=this.out;if(e!==u){var n=f(this,t,e);n!==u&&e._n(n)}},t.prototype._e=function(t){var e=this.out;e!==u&&e._e(t)},t.prototype._c=function(){var t=this.out;t!==u&&t._c()},t}(),k=function(){function t(t){this.type="remember",this.ins=t,this.out=u}return t.prototype._start=function(t){this.out=t,this.ins._add(t)},t.prototype._stop=function(){this.ins._remove(this.out),this.out=u},t}(),D=function(){function t(t,e){this.type="replaceError",this.ins=e,this.out=u,this.f=t}return t.prototype._start=function(t){this.out=t,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=u},t.prototype._n=function(t){var e=this.out;e!==u&&e._n(t)},t.prototype._e=function(t){var e=this.out;if(e!==u)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(t){e._e(t)}},t.prototype._c=function(){var t=this.out;t!==u&&t._c()},t}(),L=function(){function t(t,e){this.type="startWith",this.ins=t,this.out=u,this.val=e}return t.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},t.prototype._stop=function(){this.ins._remove(this.out),this.out=u},t}(),R=function(){function t(t,e){this.type="take",this.ins=e,this.out=u,this.max=t,this.taken=0}return t.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=u},t.prototype._n=function(t){var e=this.out;if(e!==u){var n=++this.taken;n<this.max?e._n(t):n===this.max&&(e._n(t),e._c())}},t.prototype._e=function(t){var e=this.out;e!==u&&e._e(t)},t.prototype._c=function(){var t=this.out;t!==u&&t._c()},t}(),P=function(){function t(t){this._prod=t||u,this._ils=[],this._stopID=u,this._dl=u,this._d=!1,this._target=null,this._err=u}return t.prototype._n=function(t){var e=this._ils,n=e.length;if(this._d&&this._dl._n(t),1==n)e[0]._n(t);else{if(0==n)return;for(var r=l(e),o=0;o<n;o++)r[o]._n(t)}},t.prototype._e=function(t){if(this._err===u){this._err=t;var e=this._ils,n=e.length;if(this._x(),this._d&&this._dl._e(t),1==n)e[0]._e(t);else{if(0==n)return;for(var r=l(e),o=0;o<n;o++)r[o]._e(t)}if(!this._d&&0==n)throw this._err}},t.prototype._c=function(){var t=this._ils,e=t.length;if(this._x(),this._d&&this._dl._c(),1==e)t[0]._c();else{if(0==e)return;for(var n=l(t),r=0;r<e;r++)n[r]._c()}},t.prototype._x=function(){0!==this._ils.length&&(this._prod!==u&&this._prod._stop(),this._err=u,this._ils=[])},t.prototype._stopNow=function(){this._prod._stop(),this._err=u,this._stopID=u},t.prototype._add=function(t){var e=this._target;if(e)return e._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==u)clearTimeout(this._stopID),this._stopID=u;else{var r=this._prod;r!==u&&r._start(this)}},t.prototype._remove=function(t){var e=this,n=this._target;if(n)return n._remove(t);var r=this._ils,o=r.indexOf(t);o>-1&&(r.splice(o,1),this._prod!==u&&r.length<=0?(this._err=u,this._stopID=setTimeout((function(){return e._stopNow()}))):1===r.length&&this._pruneCycles())},t.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},t.prototype._hasNoSinks=function(t,e){if(-1!==e.indexOf(t))return!0;if(t.out===this)return!0;if(t.out&&t.out!==u)return this._hasNoSinks(t.out,e.concat(t));if(t._ils){for(var n=0,r=t._ils.length;n<r;n++)if(!this._hasNoSinks(t._ils[n],e.concat(t)))return!1;return!0}return!1},t.prototype.ctor=function(){return this instanceof B?B:t},t.prototype.addListener=function(t){t._n=t.next||c,t._e=t.error||c,t._c=t.complete||c,this._add(t)},t.prototype.removeListener=function(t){this._remove(t)},t.prototype.subscribe=function(t){return this.addListener(t),new d(this,t)},t.prototype[a]=function(){return this},t.create=function(e){if(e){if("function"!=typeof e.start||"function"!=typeof e.stop)throw new Error("producer requires both start and stop functions");h(e)}return new t(e)},t.createWithMemory=function(t){return t&&h(t),new B(t)},t.never=function(){return new t({_start:c,_stop:c})},t.empty=function(){return new t({_start:function(t){t._c()},_stop:c})},t.throw=function(e){return new t({_start:function(t){t._e(e)},_stop:c})},t.from=function(e){if("function"==typeof e[a])return t.fromObservable(e);if("function"==typeof e.then)return t.fromPromise(e);if(Array.isArray(e))return t.fromArray(e);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},t.of=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.fromArray(e)},t.fromArray=function(e){return new t(new b(e))},t.fromPromise=function(e){return new t(new w(e))},t.fromObservable=function(e){if(void 0!==e.endWhen)return e;var n="function"==typeof e[a]?e[a]():e;return new t(new m(n))},t.periodic=function(e){return new t(new x(e))},t.prototype._map=function(t){return new(this.ctor())(new I(t,this))},t.prototype.map=function(t){return this._map(t)},t.prototype.mapTo=function(t){var e=this.map((function(){return t}));return e._prod.type="mapTo",e},t.prototype.filter=function(e){var n,r,o=this._prod;return new t(o instanceof T?new T((n=o.f,r=e,function(t){return n(t)&&r(t)}),o.ins):new T(e,this))},t.prototype.take=function(t){return new(this.ctor())(new R(t,this))},t.prototype.drop=function(e){return new t(new O(e,this))},t.prototype.last=function(){return new t(new N(this))},t.prototype.startWith=function(t){return new B(new L(this,t))},t.prototype.endWhen=function(t){return new(this.ctor())(new S(t,this))},t.prototype.fold=function(t,e){return new B(new C(t,e,this))},t.prototype.replaceError=function(t){return new(this.ctor())(new D(t,this))},t.prototype.flatten=function(){return new t(new j(this))},t.prototype.compose=function(t){return t(this)},t.prototype.remember=function(){return new B(new k(this))},t.prototype.debug=function(t){return new(this.ctor())(new E(this,t))},t.prototype.imitate=function(t){if(t instanceof B)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var e=this._ils,n=e.length,r=0;r<n;r++)t._add(e[r]);this._ils=[]},t.prototype.shamefullySendNext=function(t){this._n(t)},t.prototype.shamefullySendError=function(t){this._e(t)},t.prototype.shamefullySendComplete=function(){this._c()},t.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||c,t._e=t.error||c,t._c=t.complete||c,this._dl=t):(this._d=!1,this._dl=u)},t.merge=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new t(new y(e))},t.combine=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new t(new g(e))},t}();e.Stream=P;var B=function(t){function e(e){var n=t.call(this,e)||this;return n._has=!1,n}return o(e,t),e.prototype._n=function(e){this._v=e,this._has=!0,t.prototype._n.call(this,e)},e.prototype._add=function(t){var e=this._target;if(e)return e._add(t);var n=this._ils;if(n.push(t),n.length>1)this._has&&t._n(this._v);else if(this._stopID!==u)this._has&&t._n(this._v),clearTimeout(this._stopID),this._stopID=u;else if(this._has)t._n(this._v);else{var r=this._prod;r!==u&&r._start(this)}},e.prototype._stopNow=function(){this._has=!1,t.prototype._stopNow.call(this)},e.prototype._x=function(){this._has=!1,t.prototype._x.call(this)},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(e){return t.prototype.mapTo.call(this,e)},e.prototype.take=function(e){return t.prototype.take.call(this,e)},e.prototype.endWhen=function(e){return t.prototype.endWhen.call(this,e)},e.prototype.replaceError=function(e){return t.prototype.replaceError.call(this,e)},e.prototype.remember=function(){return this},e.prototype.debug=function(e){return t.prototype.debug.call(this,e)},e}(P);e.MemoryStream=B;var F=P;e.default=F},function(t,e,n){"use strict";(function(t){function n(){var e;return(e="undefined"!=typeof window?window:void 0!==t?t:this).Cyclejs=e.Cyclejs||{},(e=e.Cyclejs).adaptStream=e.adaptStream||function(t){return t},e}Object.defineProperty(e,"__esModule",{value:!0}),e.setAdapt=function(t){n().adaptStream=t},e.adapt=function(t){return n().adaptStream(t)}}).call(this,n(3))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),o=n(29);function i(t,e,n){var i,s,a,u={};if(void 0!==n?(u=e,o.array(n)?i=n:o.primitive(n)?s=n:n&&n.sel&&(i=[n])):void 0!==e&&(o.array(e)?i=e:o.primitive(e)?s=e:e&&e.sel?i=[e]:u=e),void 0!==i)for(a=0;a<i.length;++a)o.primitive(i[a])&&(i[a]=r.vnode(void 0,void 0,void 0,i[a],void 0));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||function t(e,n,r){if(e.ns="http://www.w3.org/2000/svg","foreignObject"!==r&&void 0!==n)for(var o=0;o<n.length;++o){var i=n[o].data;void 0!==i&&t(i,n[o].children,n[o].sel)}}(u,i,t),r.vnode(t,u,i,s,void 0)}e.h=i,e.default=i},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";(function(t){var n,r=("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:Function("return this")()).Symbol;n="function"==typeof r?r("parent"):"@@snabbdom-selector-parent",e.a=n}).call(this,n(3))},function(t,e,n){"use strict";function r(t,e,n,r,o){return{sel:t,data:e,children:n,text:r,elm:o,key:void 0===e?void 0:e.key}}Object.defineProperty(e,"__esModule",{value:!0}),e.vnode=r,e.default=r},function(t,e,n){"use strict";function r(t,e){var n,r,o=e.elm,i=t.data.class,s=e.data.class;if((i||s)&&i!==s){for(r in s=s||{},i=i||{})s[r]||o.classList.remove(r);for(r in s)(n=s[r])!==i[r]&&o.classList[n?"add":"remove"](r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.classModule={create:r,update:r},e.default=e.classModule},function(t,e,n){"use strict";function r(t,e){var n,r,o=e.elm,i=t.data.props,s=e.data.props;if((i||s)&&i!==s){for(n in s=s||{},i=i||{})s[n]||delete o[n];for(n in s)r=s[n],i[n]===r||"value"===n&&o[n]===r||(o[n]=r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.propsModule={create:r,update:r},e.default=e.propsModule},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function r(t,e){var n,r=e.elm,o=t.data.attrs,i=e.data.attrs;if((o||i)&&o!==i){for(n in o=o||{},i=i||{}){var s=i[n];o[n]!==s&&(!0===s?r.setAttribute(n,""):!1===s?r.removeAttribute(n):120!==n.charCodeAt(0)?r.setAttribute(n,s):58===n.charCodeAt(3)?r.setAttributeNS("http://www.w3.org/XML/1998/namespace",n,s):58===n.charCodeAt(5)?r.setAttributeNS("http://www.w3.org/1999/xlink",n,s):r.setAttribute(n,s))}for(n in o)n in i||r.removeAttribute(n)}}e.attributesModule={create:r,update:r},e.default=e.attributesModule},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="undefined"!=typeof window&&window.requestAnimationFrame.bind(window)||setTimeout,o=!1;function i(t,e,n){var o;o=function(){t[e]=n},r((function(){r(o)}))}function s(t,e){var n,r,o=e.elm,s=t.data.style,a=e.data.style;if((s||a)&&s!==a){a=a||{};var u="delayed"in(s=s||{});for(r in s)a[r]||("-"===r[0]&&"-"===r[1]?o.style.removeProperty(r):o.style[r]="");for(r in a)if(n=a[r],"delayed"===r&&a.delayed)for(var c in a.delayed)n=a.delayed[c],u&&n===s.delayed[c]||i(o.style,c,n);else"remove"!==r&&n!==s[r]&&("-"===r[0]&&"-"===r[1]?o.style.setProperty(r,n):o.style[r]=n)}}e.styleModule={pre:function(){o=!1},create:s,update:s,destroy:function(t){var e,n,r=t.elm,o=t.data.style;if(o&&(e=o.destroy))for(n in e)r.style[n]=e[n]},remove:function(t,e){var n=t.data.style;if(n&&n.remove){o||(t.elm.offsetLeft,o=!0);var r,i=t.elm,s=0,a=n.remove,u=0,c=[];for(r in a)c.push(r),i.style[r]=a[r];for(var l=getComputedStyle(i)["transition-property"].split(", ");s<l.length;++s)-1!==c.indexOf(l[s])&&u++;i.addEventListener("transitionend",(function(t){t.target===i&&--u,0===u&&e()}))}else e()}},e.default=e.styleModule},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=/[A-Z]/g;function o(t,e){var n,o=e.elm,i=t.data.dataset,s=e.data.dataset;if((i||s)&&i!==s){i=i||{},s=s||{};var a=o.dataset;for(n in i)s[n]||(a?n in a&&delete a[n]:o.removeAttribute("data-"+n.replace(r,"-$&").toLowerCase()));for(n in s)i[n]!==s[n]&&(a?a[n]=s[n]:o.setAttribute("data-"+n.replace(r,"-$&").toLowerCase(),s[n]))}}e.datasetModule={create:o,update:o},e.default=e.datasetModule},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),o=n(30);function i(t,e){var n,s=void 0!==e?e:o.default;if(s.isElement(t)){var a,u=t.id?"#"+t.id:"",c=t.getAttribute("class"),l=c?"."+c.split(" ").join("."):"",f=s.tagName(t).toLowerCase()+u+l,p={},h=[],d=void 0,v=void 0,m=t.attributes,y=t.childNodes;for(d=0,v=m.length;d<v;d++)"id"!==(a=m[d].nodeName)&&"class"!==a&&(p[a]=m[d].nodeValue);for(d=0,v=y.length;d<v;d++)h.push(i(y[d],e));return r.default(f,{attrs:p},h,void 0,t)}return s.isText(t)?(n=s.getTextContent(t),r.default(void 0,void 0,void 0,n,t)):s.isComment(t)?(n=s.getTextContent(t),r.default("!",{},[],n,t)):r.default("",{},[],void 0,t)}e.toVNode=i,e.default=i},function(t,e,n){"use strict";var r=n(24),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),i=Object.prototype.toString,s=Array.prototype.concat,a=Object.defineProperty,u=a&&function(){var t={};try{for(var e in a(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),c=function(t,e,n,r){var o;(!(e in t)||"function"==typeof(o=r)&&"[object Function]"===i.call(o)&&r())&&(u?a(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},l=function(t,e){var n=arguments.length>2?arguments[2]:{},i=r(e);o&&(i=s.call(i,Object.getOwnPropertySymbols(e)));for(var a=0;a<i.length;a+=1)c(t,i[a],e[i[a]],n[i[a]])};l.supportsDescriptors=!!u,t.exports=l},function(t,e,n){"use strict";var r=Object.prototype.toString;t.exports=function(t){var e=r.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===r.call(t.callee)),n}},function(t,e,n){"use strict";"undefined"!=typeof self?t.exports=self:"undefined"!=typeof window?t.exports=window:t.exports=Function("return this")()},function(t,e,n){"use strict";(function(e){var r=n(14);t.exports=function(){return"object"==typeof e&&e&&e.Math===Math&&e.Array===Array?e:r}}).call(this,n(3))},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],l=!1,f=-1;function p(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!l){var t=a(p);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if("undefined"!=typeof MutationObserver){var e=document.createTextNode(""),r=[],o=0;return new MutationObserver((function(){for(;r.length;)r.shift()()})).observe(e,{characterData:!0}),function(t){r.push(t),e.data=o=1-o}}return void 0!==t?t:void 0!==n?n.nextTick:setTimeout}}).call(this,n(27).setImmediate,n(16))},function(t,e,n){"use strict";(function(t){function r(){var e;return(e="undefined"!=typeof window?window:void 0!==t?t:this).Cyclejs=e.Cyclejs||{},(e=e.Cyclejs).adaptStream=e.adaptStream||function(t){return t},e}function o(t){return r().adaptStream(t)}n.d(e,"a",(function(){return o}))}).call(this,n(3))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=function(){function t(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return t.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},t.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},t.prototype._n=function(t){var e=this.out;e&&e._n(t)},t.prototype._e=function(t){var e=this.out;e&&e._e(t)},t.prototype._c=function(){var t=this.out;if(t){var e=this.streams;e[this.i]._remove(this),++this.i<e.length?e[this.i]._add(this):t._c()}},t}();e.default=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new r.Stream(new o(t))}},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.SampleCombineOperator=e.SampleCombineListener=void 0;var o=n(0),i={},s=function(){function t(t,e){this.i=t,this.p=e,e.ils[t]=this}return t.prototype._n=function(t){var e=this.p;e.out!==i&&e.up(t,this.i)},t.prototype._e=function(t){this.p._e(t)},t.prototype._c=function(){this.p.down(this.i,this)},t}();e.SampleCombineListener=s;var a,u=function(){function t(t,e){this.type="sampleCombine",this.ins=t,this.others=e,this.out=i,this.ils=[],this.Nn=0,this.vals=[]}return t.prototype._start=function(t){this.out=t;for(var e=this.others,n=this.Nn=e.length,r=this.vals=new Array(n),o=0;o<n;o++)r[o]=i,e[o]._add(new s(o,this));this.ins._add(this)},t.prototype._stop=function(){var t=this.others,e=t.length,n=this.ils;this.ins._remove(this);for(var r=0;r<e;r++)t[r]._remove(n[r]);this.out=i,this.vals=[],this.ils=[]},t.prototype._n=function(t){var e=this.out;e!==i&&(this.Nn>0||e._n(r([t],this.vals)))},t.prototype._e=function(t){var e=this.out;e!==i&&e._e(t)},t.prototype._c=function(){var t=this.out;t!==i&&t._c()},t.prototype.up=function(t,e){var n=this.vals[e];this.Nn>0&&n===i&&this.Nn--,this.vals[e]=t},t.prototype.down=function(t,e){this.others[t]._remove(e)},t}();e.SampleCombineOperator=u,a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return new o.Stream(new u(e,t))}},e.default=a},function(t,e,n){t.exports=n(22)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,n=t.Symbol;if("function"==typeof n)if(n.observable)e=n.observable;else{e=n.for("https://github.com/benlesh/symbol-observable");try{n.observable=e}catch(t){}}else e="@@observable";return e}},function(t,e,n){"use strict";var r=n(12),o=n(14),i=n(15),s=n(26),a=i(),u=function(){return a};r(u,{getPolyfill:i,implementation:o,shim:s}),t.exports=u},function(t,e,n){"use strict";var r=Array.prototype.slice,o=n(13),i=Object.keys,s=i?function(t){return i(t)}:n(25),a=Object.keys;s.shim=function(){Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return o(t)?a(r.call(t)):a(t)}):Object.keys=s;return Object.keys||s},t.exports=s},function(t,e,n){"use strict";var r;if(!Object.keys){var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,s=n(13),a=Object.prototype.propertyIsEnumerable,u=!a.call({toString:null},"toString"),c=a.call((function(){}),"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(t){var e=t.constructor;return e&&e.prototype===t},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!p["$"+t]&&o.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{f(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();r=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===i.call(t),r=s(t),a=e&&"[object String]"===i.call(t),p=[];if(!e&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var d=c&&n;if(a&&t.length>0&&!o.call(t,0))for(var v=0;v<t.length;++v)p.push(String(v));if(r&&t.length>0)for(var m=0;m<t.length;++m)p.push(String(m));else for(var y in t)d&&"prototype"===y||!o.call(t,y)||p.push(String(y));if(u)for(var _=function(t){if("undefined"==typeof window||!h)return f(t);try{return f(t)}catch(t){return!1}}(t),g=0;g<l.length;++g)_&&"constructor"===l[g]||!o.call(t,l[g])||p.push(l[g]);return p}}t.exports=r},function(t,e,n){"use strict";var r=n(12),o=n(15);t.exports=function(){var t=o();if(r.supportsDescriptors){var e=Object.getOwnPropertyDescriptor(t,"globalThis");(!e||e.configurable&&(e.enumerable||e.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!1})}else"object"==typeof globalThis&&globalThis===t||(t.globalThis=t);return t}},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(28),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(3))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,o,i,s,a,u=1,c={},l=!1,f=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){d(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){i.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,r=function(t){var e=f.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):r=function(t){setTimeout(d,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&d(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),r=function(e){t.postMessage(s+e,"*")}),p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return c[u]=o,r(u),u++},p.clearImmediate=h}function h(t){delete c[t]}function d(t){if(l)setTimeout(d,0,t);else{var e=c[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{h(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(3),n(16))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.array=Array.isArray,e.primitive=function(t){return"string"==typeof t||"number"==typeof t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.htmlDomApi={createElement:function(t){return document.createElement(t)},createElementNS:function(t,e){return document.createElementNS(t,e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},getTextContent:function(t){return t.textContent},isElement:function(t){return 1===t.nodeType},isText:function(t){return 3===t.nodeType},isComment:function(t){return 8===t.nodeType}},e.default=e.htmlDomApi},function(t,e,n){"use strict";n.r(e),n.d(e,"update",(function(){return he})),n.d(e,"init",(function(){return de}));var r=n(0),o=n.n(r),i=n(17),s=n.n(i),a=n(18);function u(t){return 0===Object.keys(t).length}function c(t,e){if("function"!=typeof t)throw new Error("First argument given to Cycle must be the 'main' function.");if("object"!=typeof e||null===e)throw new Error("Second argument given to Cycle must be an object with driver functions as properties.");if(u(e))throw new Error("Second argument given to Cycle must be an object with at least one driver function declared as a property.");var n=function(t){if("object"!=typeof t||null===t)throw new Error("Argument given to setupReusable must be an object with driver functions as properties.");if(u(t))throw new Error("Argument given to setupReusable must be an object with at least one driver function declared as a property.");var e=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=o.a.create());return e}(t),n=function(t){for(var e in t)t.hasOwnProperty(e)&&t[e]&&"function"==typeof t[e].shamefullySendNext&&(t[e]=Object(a.a)(t[e]));return t}(function(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r](e[r],r),n[r]&&"object"==typeof n[r]&&(n[r]._isCycleSource=r));return n}(t,e));return{sources:n,run:function(t){return function(t,e){var n=s()(),r=Object.keys(t).filter((function(t){return!!e[t]})),i={},a={};r.forEach((function(t){i[t]={_n:[],_e:[]},a[t]={next:function(e){return i[t]._n.push(e)},error:function(e){return i[t]._e.push(e)},complete:function(){}}}));var u=r.map((function(e){return o.a.fromObservable(t[e]).subscribe(a[e])}));return r.forEach((function(t){var r=e[t],o=function(t){n((function(){return r._n(t)}))},s=function(t){n((function(){(console.error||console.log)(t),r._e(t)}))};i[t]._n.forEach(o),i[t]._e.forEach(s),a[t].next=o,a[t].error=s,a[t]._n=o,a[t]._e=s})),i=null,function(){u.forEach((function(t){return t.unsubscribe()}))}}(t,e)},dispose:function(){!function(t){for(var e in t)t.hasOwnProperty(e)&&t[e]&&t[e].dispose&&t[e].dispose()}(n),function(t){Object.keys(t).forEach((function(e){return t[e]._c()}))}(e)}}}(e),r=t(n.sources);return"undefined"!=typeof window&&(window.Cyclejs=window.Cyclejs||{},window.Cyclejs.sinks=r),{sinks:r,sources:n.sources,run:function(){var t=n.run(r);return function(){t(),n.dispose()}}}}function l(t,e){var n=c(t,e);return"undefined"!=typeof window&&window.CyclejsDevTool_startGraphSerializer&&window.CyclejsDevTool_startGraphSerializer(n.sinks),n.run()}var f=n(2);var p=n(1);function h(t,e,n,o,i){void 0===n&&(n=!1),void 0===o&&(o=!1),void 0===i&&(i=!1);var s=null;return r.Stream.create({start:function(r){s=o?function(t){d(t,o),r.next(t)}:function(t){r.next(t)},t.addEventListener(e,s,{capture:n,passive:i})},stop:function(){t.removeEventListener(e,s,n),s=null}})}function d(t,e){if(e)if("boolean"==typeof e)t.preventDefault();else if("function"==typeof e)e(t)&&t.preventDefault();else{if("object"!=typeof e)throw new Error("preventDefault has to be either a boolean, predicate function or object");(function t(e,n){for(var r=Object.keys(e),o=r.length,i=0;i<o;i++){var s=r[i];if("object"==typeof e[s]&&"object"==typeof n[s]){if(!t(e[s],n[s]))return!1}else if(e[s]!==n[s])return!1}return!0})(e,t)&&t.preventDefault()}}var v=function(){function t(t){this._name=t}return t.prototype.select=function(t){return this},t.prototype.elements=function(){var t=Object(p.adapt)(o.a.of([document]));return t._isCycleSource=this._name,t},t.prototype.element=function(){var t=Object(p.adapt)(o.a.of(document));return t._isCycleSource=this._name,t},t.prototype.events=function(t,e,n){var r;void 0===e&&(e={}),r=h(document,t,e.useCapture,e.preventDefault);var o=Object(p.adapt)(r);return o._isCycleSource=this._name,o},t}(),m=function(){function t(t){this._name=t}return t.prototype.select=function(t){return this},t.prototype.elements=function(){var t=Object(p.adapt)(o.a.of([document.body]));return t._isCycleSource=this._name,t},t.prototype.element=function(){var t=Object(p.adapt)(o.a.of(document.body));return t._isCycleSource=this._name,t},t.prototype.events=function(t,e,n){var r;void 0===e&&(e={}),r=h(document.body,t,e.useCapture,e.preventDefault);var o=Object(p.adapt)(r);return o._isCycleSource=this._name,o},t}();function y(t){if("string"!=typeof t&&(e=t,!("object"==typeof HTMLElement?e instanceof HTMLElement||e instanceof DocumentFragment:e&&"object"==typeof e&&null!==e&&(1===e.nodeType||11===e.nodeType)&&"string"==typeof e.nodeName)))throw new Error("Given container is not a DOM element neither a selector string.");var e}function _(t){for(var e="",n=t.length-1;n>=0&&"selector"===t[n].type;n--)e=t[n].scope+" "+e;return e.trim()}function g(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].type!==e[n].type||t[n].scope!==e[n].scope)return!1;return!0}var b=function(){function t(t,e){this.namespace=t,this.isolateModule=e,this._namespace=t.filter((function(t){return"selector"!==t.type}))}return t.prototype.isDirectlyInScope=function(t){var e=this.isolateModule.getNamespace(t);if(!e)return!1;if(this._namespace.length>e.length||!g(this._namespace,e.slice(0,this._namespace.length)))return!1;for(var n=this._namespace.length;n<e.length;n++)if("total"===e[n].type)return!1;return!0},t}();var w=function(){function t(t,e){this.namespace=t,this.isolateModule=e}return t.prototype.call=function(){var t,e=this.namespace,n=_(e),r=new b(e,this.isolateModule),o=this.isolateModule.getElement(e.filter((function(t){return"selector"!==t.type})));return void 0===o?[]:""===n?[o]:(t=o.querySelectorAll(n),Array.prototype.slice.call(t)).filter(r.isDirectlyInScope,r).concat(o.matches(n)?[o]:[])},t}(),x=function(){return(x=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function E(t){return{type:(e=t,e.length>1&&("."===e[0]||"#"===e[0])?"sibling":"total"),scope:t};var e}var O=function(){function t(e,n,r,o,i,s){var a;void 0===r&&(r=[]),this._rootElement$=e,this._sanitation$=n,this._namespace=r,this._isolateModule=o,this._eventDelegator=i,this._name=s,this.isolateSource=function(e,n){return new t(e._rootElement$,e._sanitation$,e._namespace.concat(E(n)),e._isolateModule,e._eventDelegator,e._name)},this.isolateSink=(a=this._namespace,function(t,e){return":root"===e?t:t.map((function(t){if(!t)return t;var n=E(e),r=x({},t,{data:x({},t.data,{isolate:t.data&&Array.isArray(t.data.isolate)?t.data.isolate:a.concat([n])})});return x({},r,{key:void 0!==r.key?r.key:JSON.stringify(r.data.isolate)})}))})}return t.prototype._elements=function(){if(0===this._namespace.length)return this._rootElement$.map((function(t){return[t]}));var t=new w(this._namespace,this._isolateModule);return this._rootElement$.map((function(){return t.call()}))},t.prototype.elements=function(){var t=Object(p.adapt)(this._elements().remember());return t._isCycleSource=this._name,t},t.prototype.element=function(){var t=Object(p.adapt)(this._elements().filter((function(t){return t.length>0})).map((function(t){return t[0]})).remember());return t._isCycleSource=this._name,t},Object.defineProperty(t.prototype,"namespace",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),t.prototype.select=function(e){if("string"!=typeof e)throw new Error("DOM driver's select() expects the argument to be a string as a CSS selector");if("document"===e)return new v(this._name);if("body"===e)return new m(this._name);var n=":root"===e?[]:this._namespace.concat({type:"selector",scope:e.trim()});return new t(this._rootElement$,this._sanitation$,n,this._isolateModule,this._eventDelegator,this._name)},t.prototype.events=function(t,e,n){if(void 0===e&&(e={}),"string"!=typeof t)throw new Error("DOM driver's events() expects argument to be a string representing the event type to listen for.");var r=this._eventDelegator.addEventListener(t,this._namespace,e,n),o=Object(p.adapt)(r);return o._isCycleSource=this._name,o},t.prototype.dispose=function(){this._sanitation$.shamefullySendNext(null)},t}();function M(t,e,n,r,o){return{sel:t,data:e,children:n,text:r,elm:o,key:void 0===e?void 0:e.key}}var S=M,T=Array.isArray;function A(t){return"string"==typeof t||"number"==typeof t}var j={createElement:function(t){return document.createElement(t)},createElementNS:function(t,e){return document.createElementNS(t,e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},getTextContent:function(t){return t.textContent},isElement:function(t){return 1===t.nodeType},isText:function(t){return 3===t.nodeType},isComment:function(t){return 8===t.nodeType}};function C(t){return void 0===t}function N(t){return void 0!==t}var I=S("",{},[],void 0,void 0);function k(t,e){return t.key===e.key&&t.sel===e.sel}function D(t,e,n){var r,o,i,s={};for(r=e;r<=n;++r)null!=(i=t[r])&&void 0!==(o=i.key)&&(s[o]=r);return s}var L=["create","update","remove","destroy","pre","post"];function R(t,e){var n,r,o={},i=void 0!==e?e:j;for(n=0;n<L.length;++n)for(o[L[n]]=[],r=0;r<t.length;++r){var s=t[r][L[n]];void 0!==s&&o[L[n]].push(s)}function a(t,e){return function(){if(0==--e){var n=i.parentNode(t);i.removeChild(n,t)}}}function u(t,e){var n,r=t.data;void 0!==r&&N(n=r.hook)&&N(n=n.init)&&(n(t),r=t.data);var s=t.children,a=t.sel;if("!"===a)C(t.text)&&(t.text=""),t.elm=i.createComment(t.text);else if(void 0!==a){var c=a.indexOf("#"),l=a.indexOf(".",c),f=c>0?c:a.length,p=l>0?l:a.length,h=-1!==c||-1!==l?a.slice(0,Math.min(f,p)):a,d=t.elm=N(r)&&N(n=r.ns)?i.createElementNS(n,h):i.createElement(h);for(f<p&&d.setAttribute("id",a.slice(f+1,p)),l>0&&d.setAttribute("class",a.slice(p+1).replace(/\./g," ")),n=0;n<o.create.length;++n)o.create[n](I,t);if(T(s))for(n=0;n<s.length;++n){var v=s[n];null!=v&&i.appendChild(d,u(v,e))}else A(t.text)&&i.appendChild(d,i.createTextNode(t.text));N(n=t.data.hook)&&(n.create&&n.create(I,t),n.insert&&e.push(t))}else t.elm=i.createTextNode(t.text);return t.elm}function c(t,e,n,r,o,s){for(;r<=o;++r){var a=n[r];null!=a&&i.insertBefore(t,u(a,s),e)}}function l(t){var e,n,r=t.data;if(void 0!==r){for(N(e=r.hook)&&N(e=e.destroy)&&e(t),e=0;e<o.destroy.length;++e)o.destroy[e](t);if(void 0!==t.children)for(n=0;n<t.children.length;++n)null!=(e=t.children[n])&&"string"!=typeof e&&l(e)}}function f(t,e,n,r){for(;n<=r;++n){var s=void 0,u=void 0,c=void 0,f=e[n];if(null!=f)if(N(f.sel)){for(l(f),u=o.remove.length+1,c=a(f.elm,u),s=0;s<o.remove.length;++s)o.remove[s](f,c);N(s=f.data)&&N(s=s.hook)&&N(s=s.remove)?s(f,c):c()}else i.removeChild(t,f.elm)}}function p(t,e,n){var r,s;N(r=e.data)&&N(s=r.hook)&&N(r=s.prepatch)&&r(t,e);var a=e.elm=t.elm,l=t.children,h=e.children;if(t!==e){if(void 0!==e.data){for(r=0;r<o.update.length;++r)o.update[r](t,e);N(r=e.data.hook)&&N(r=r.update)&&r(t,e)}C(e.text)?N(l)&&N(h)?l!==h&&function(t,e,n,r){for(var o,s,a,l=0,h=0,d=e.length-1,v=e[0],m=e[d],y=n.length-1,_=n[0],g=n[y];l<=d&&h<=y;)null==v?v=e[++l]:null==m?m=e[--d]:null==_?_=n[++h]:null==g?g=n[--y]:k(v,_)?(p(v,_,r),v=e[++l],_=n[++h]):k(m,g)?(p(m,g,r),m=e[--d],g=n[--y]):k(v,g)?(p(v,g,r),i.insertBefore(t,v.elm,i.nextSibling(m.elm)),v=e[++l],g=n[--y]):k(m,_)?(p(m,_,r),i.insertBefore(t,m.elm,v.elm),m=e[--d],_=n[++h]):(void 0===o&&(o=D(e,l,d)),C(s=o[_.key])?(i.insertBefore(t,u(_,r),v.elm),_=n[++h]):((a=e[s]).sel!==_.sel?i.insertBefore(t,u(_,r),v.elm):(p(a,_,r),e[s]=void 0,i.insertBefore(t,a.elm,v.elm)),_=n[++h]));(l<=d||h<=y)&&(l>d?c(t,null==n[y+1]?null:n[y+1].elm,n,h,y,r):f(t,e,l,d))}(a,l,h,n):N(h)?(N(t.text)&&i.setTextContent(a,""),c(a,null,h,0,h.length-1,n)):N(l)?f(a,l,0,l.length-1):N(t.text)&&i.setTextContent(a,""):t.text!==e.text&&(N(l)&&f(a,l,0,l.length-1),i.setTextContent(a,e.text)),N(s)&&N(r=s.postpatch)&&r(t,e)}}return function(t,e){var n,r,s,a=[];for(n=0;n<o.pre.length;++n)o.pre[n]();for(function(t){return void 0!==t.sel}(t)||(t=function(t){var e=t.id?"#"+t.id:"",n=t.className?"."+t.className.split(" ").join("."):"";return S(i.tagName(t).toLowerCase()+e+n,{},[],void 0,t)}(t)),k(t,e)?p(t,e,a):(r=t.elm,s=i.parentNode(r),u(e,a),null!==s&&(i.insertBefore(s,e.elm,i.nextSibling(r)),f(s,[t],0,0))),n=0;n<a.length;++n)a[n].data.hook.insert(a[n]);for(n=0;n<o.post.length;++n)o.post[n]();return e}}var P=n(19),B=n.n(P),F=n(20),$=n.n(F),G=n(11),W=n(5);var V=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},z="[ \t]*",U="(?:=|\\$=|\\^=|\\*=|~=|\\|=)",K="(?:(?:[ \t]+)|(?:[ \t]*(>)[ \t]*)|(?:[ \t]*(\\+)[ \t]*)|(?:[ \t]*(~)[ \t]*))",q=new RegExp("^"+K+"$");function H(t){var e=t.trim(),n=new RegExp("(:?[\\w-]+)?","y"),r=n.exec(e)[0],o=new RegExp('(?:\\.[\\w-]+)|(?:#[\\w-]+)|(?:\\[[ \t]*[\\w-]+[ \t]*(?:(?:=|\\$=|\\^=|\\*=|~=|\\|=)[ \t]*[^\\]]+[ \t]*)?\\])|:(?:first-child|last-child|nth-child\\((?:even|odd|\\d*(?:-?n(?:\\+\\d+)?)?)\\)|empty|root|contains\\("[^"]*"\\))|(?:(?:[ \t]+)|(?:[ \t]*(>)[ \t]*)|(?:[ \t]*(\\+)[ \t]*)|(?:[ \t]*(~)[ \t]*))',"y");o.lastIndex=n.lastIndex;for(var i=[],s=void 0,a=void 0,u=-1;o.lastIndex<e.length;){var c=o.exec(e);if(!c&&void 0===a)throw new Error("Parse error, invalid selector");if(c&&q.test(c[0])){a=q.exec(c[0])[0],u=o.lastIndex}else{if(void 0!==a){s=[Y(a),H(e.substring(u))];break}i.push(c[0])}}var l=i.filter((function(t){return t.startsWith(".")})).map((function(t){return t.substring(1)})),f=i.filter((function(t){return t.startsWith("#")})).map((function(t){return t.substring(1)}));if(f.length>1)throw new Error("Invalid selector, only one id is allowed");var p=new RegExp("([\\w-]+)[ \t]*("+U+")?"+z+"([^\\]]+)?"),h=i.filter((function(t){return t.startsWith("[")})).map((function(t){return p.exec(t).slice(1,4)})).map((function(t){var e,n=t[0],r=t[1],o=t[2];return(e={})[n]=[X(r),o?Z(o):o],e})).reduce((function(t,e){return V({},t,e)}),{}),d=i.filter((function(t){return t.startsWith(":")})).map((function(t){return function(t){if("first-child"===t||"last-child"===t||"root"===t||"empty"===t)return[t,void 0];if(t.startsWith("contains")){return["contains",t.slice(10,-2)]}var e=t.slice(10,-1);"even"===e&&(e="2n");"odd"===e&&(e="2n+1");return["nth-child",e]}(t.substring(1))}));return{id:f[0]||"",tag:r,classList:l,attributes:h,nextSelector:s,pseudos:d}}function Z(t){if(t.startsWith('"'))return t.slice(1,-1);if("true"===t)return!0;if("false"===t)return!1;var e=parseFloat(t);return isNaN(e)?t:e}function X(t){switch(t){case"=":return"exact";case"^=":return"startsWith";case"$=":return"endsWith";case"*=":return"contains";case"~=":return"whitespace";case"|=":return"dash";default:return"has"}}function Y(t){switch(t.trim()){case">":return"child";case"+":return"nextSibling";case"~":return"sibling";default:return"subtree"}}function J(t){return function(e,n){var r="object"==typeof e?e:H(e),o=r.tag,i=r.id,s=r.classList,a=r.attributes,u=r.nextSelector,c=r.pseudos;if(void 0!==u)throw new Error("matches can only process selectors that target a single element");if(!n)return!1;if(o&&o.toLowerCase()!==t.tag(n).toLowerCase())return!1;if(i&&i!==t.id(n))return!1;for(var l=t.className(n).split(" "),f=0;f<s.length;f++)if(-1===l.indexOf(s[f]))return!1;for(var p in a){var h=t.attr(n,p),d=a[p][0],v=a[p][1];if(void 0===h)return!1;if("has"===d)return!0;if("exact"===d&&h!==v)return!1;if("exact"!==d){if("string"!=typeof v)throw new Error("All non-string values have to be an exact match");if("startsWith"===d&&!h.startsWith(v))return!1;if("endsWith"===d&&!h.endsWith(v))return!1;if("contains"===d&&-1===h.indexOf(v))return!1;if("whitespace"===d&&-1===h.split(" ").indexOf(v))return!1;if("dash"===d&&-1===h.split("-").indexOf(v))return!1}}for(f=0;f<c.length;f++){var m=c[f],y=(d=m[0],m[1]);if("contains"===d&&y!==t.contents(n))return!1;if("empty"===d&&(t.contents(n)||0!==t.children(n).length))return!1;if("root"===d&&void 0!==t.parent(n))return!1;if(-1!==d.indexOf("child")){if(!t.parent(n))return!1;var _=t.children(t.parent(n));if("first-child"===d&&0!==_.indexOf(n))return!1;if("last-child"===d&&_.indexOf(n)!==_.length-1)return!1;if("nth-child"===d){var g=/([\+-]?)(\d*)(n?)(\+\d+)?/.exec(y).slice(1),b=_.indexOf(n);g[0]||(g[0]="+");var w=g[1]?parseInt(g[0]+g[1]):void 0,x=parseInt(g[3]||"0");if(w&&"n"===g[2]&&b%w!==x)return!1;if(!w&&g[2]&&("+"===g[0]&&b-x<0||"-"===g[0]&&b-x>=0))return!1;if(!g[2]&&w&&b!==w-1)return!1}}}return!0}}function Q(t){if(!t.sel)return{tagName:"",id:"",className:""};var e=t.sel,n=e.indexOf("#"),r=e.indexOf(".",n),o=n>0?n:e.length,i=r>0?r:e.length;return{tagName:-1!==n||-1!==r?e.slice(0,Math.min(o,i)):e,id:o<i?e.slice(o+1,i):void 0,className:r>0?e.slice(i+1).replace(/\./g," "):void 0}}function tt(t){var e=Q(t).className,n=void 0===e?"":e;if(!t.data)return n;var r=t.data,o=r.class,i=r.props;o&&(n+=" "+Object.keys(o).filter((function(t){return o[t]})).join(" "));return i&&i.className&&(n+=" "+i.className),n&&n.trim()}var et=n(4),nt={tag:function(t){return Q(t).tagName},className:function(t){return tt(t)},id:function(t){return Q(t).id||""},children:function(t){return t.children||[]},parent:function(t){return t.data[et.a]||t},contents:function(t){return t.text||""},attr:function(t,e){if(t.data){var n=t.data,r=n.attrs,o=void 0===r?{}:r,i=n.props,s=void 0===i?{}:i,a=n.dataset,u=void 0===a?{}:a;if(o[e])return o[e];if(s[e])return s[e];if(0===e.indexOf("data-")&&u[e.slice(5)])return u[e.slice(5)]}}},rt=J(nt);var ot,it;ot=nt,it=function(t,e){var n=e.data,r=rt.bind(null,t);if(n&&n.fn){var o=void 0;return!!r(o=Array.isArray(n.args)?n.fn.apply(null,n.args):n.args?n.fn.call(null,n.args):n.fn())&&o}return r(e)}||J(ot);var st=function(){function t(t){this.rootElement=t}return t.prototype.call=function(t){if(11===this.rootElement.nodeType)return this.wrapDocFrag(null===t?[]:[t]);if(null===t)return this.wrap([]);var e=Q(t),n=e.tagName,r=e.id,o=tt(t),i=((t.data||{}).props||{}).id,s=void 0===i?r:i;return"string"==typeof s&&s.toUpperCase()===this.rootElement.id.toUpperCase()&&n.toUpperCase()===this.rootElement.tagName.toUpperCase()&&o.toUpperCase()===this.rootElement.className.toUpperCase()?t:this.wrap([t])},t.prototype.wrapDocFrag=function(t){return Object(W.vnode)("",{isolate:[]},t,void 0,this.rootElement)},t.prototype.wrap=function(t){var e=this.rootElement,n=e.tagName,r=e.id,o=e.className,i=r?"#"+r:"",s=o?"."+o.split(" ").join("."):"",a=Object(f.h)(""+n.toLowerCase()+i+s,{},t);return a.data=a.data||{},a.data.isolate=a.data.isolate||[],a},t}(),at=n(6),ut=n.n(at),ct=n(7),lt=n.n(ct),ft=n(8),pt=n.n(ft),ht=n(9),dt=n.n(ht),vt=n(10),mt=n.n(vt),yt=[dt.a,ut.a,lt.a,pt.a,mt.a],_t=function(){function t(t){this.mapper=t,this.tree=[void 0,{}]}return t.prototype.set=function(t,e,n){for(var r=this.tree,o=void 0!==n?n:t.length,i=0;i<o;i++){var s=this.mapper(t[i]),a=r[1][s];a||(a=[void 0,{}],r[1][s]=a),r=a}r[0]=e},t.prototype.getDefault=function(t,e,n){return this.get(t,e,n)},t.prototype.get=function(t,e,n){for(var r=this.tree,o=void 0!==n?n:t.length,i=0;i<o;i++){var s=this.mapper(t[i]),a=r[1][s];if(!a){if(!e)return;a=[void 0,{}],r[1][s]=a}r=a}return e&&!r[0]&&(r[0]=e()),r[0]},t.prototype.delete=function(t){for(var e=this.tree,n=0;n<t.length-1;n++){var r=e[1][this.mapper(t[n])];if(!r)return;e=r}delete e[1][this.mapper(t[t.length-1])]},t}(),gt=function(){function t(){this.namespaceTree=new _t((function(t){return t.scope})),this.namespaceByElement=new Map,this.vnodesBeingRemoved=[]}return t.prototype.setEventDelegator=function(t){this.eventDelegator=t},t.prototype.insertElement=function(t,e){this.namespaceByElement.set(e,t),this.namespaceTree.set(t,e)},t.prototype.removeElement=function(t){this.namespaceByElement.delete(t);var e=this.getNamespace(t);e&&this.namespaceTree.delete(e)},t.prototype.getElement=function(t,e){return this.namespaceTree.get(t,void 0,e)},t.prototype.getRootElement=function(t){if(this.namespaceByElement.has(t))return t;for(var e=t;!this.namespaceByElement.has(e);){if(!(e=e.parentNode))return;if("HTML"===e.tagName)throw new Error("No root element found, this should not happen at all")}return e},t.prototype.getNamespace=function(t){var e=this.getRootElement(t);if(e)return this.namespaceByElement.get(e)},t.prototype.createModule=function(){var t=this;return{create:function(e,n){var r=n.elm,o=n.data,i=(void 0===o?{}:o).isolate;Array.isArray(i)&&t.insertElement(i,r)},update:function(e,n){var r=e.elm,o=e.data,i=void 0===o?{}:o,s=n.elm,a=n.data,u=void 0===a?{}:a,c=i.isolate,l=u.isolate;g(c,l)||Array.isArray(c)&&t.removeElement(r),Array.isArray(l)&&t.insertElement(l,s)},destroy:function(e){t.vnodesBeingRemoved.push(e)},remove:function(e,n){t.vnodesBeingRemoved.push(e),n()},post:function(){for(var e=t.vnodesBeingRemoved,n=e.length-1;n>=0;n--){var r=e[n],o=void 0!==r.data?r.data.isolation:void 0;void 0!==o&&t.removeElement(o),t.eventDelegator.removeElement(r.elm,o)}t.vnodesBeingRemoved=[]}}},t}(),bt=function(){function t(){this.arr=[],this.prios=[]}return t.prototype.add=function(t,e){for(var n=0;n<this.arr.length;n++)if(this.prios[n]<e)return this.arr.splice(n,0,t),void this.prios.splice(n,0,e);this.arr.push(t),this.prios.push(e)},t.prototype.forEach=function(t){for(var e=0;e<this.arr.length;e++)t(this.arr[e],e,this.arr)},t.prototype.delete=function(t){for(var e=0;e<this.arr.length;e++)if(this.arr[e]===t)return this.arr.splice(e,1),void this.prios.splice(e,1)},t}(),wt=function(){return(wt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},xt=["blur","canplay","canplaythrough","durationchange","emptied","ended","focus","load","loadeddata","loadedmetadata","mouseenter","mouseleave","pause","play","playing","ratechange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeupdate","unload","volumechange","waiting"],Et=function(){function t(t,e){var n=this;this.rootElement$=t,this.isolateModule=e,this.virtualListeners=new _t((function(t){return t.scope})),this.nonBubblingListenersToAdd=new Set,this.virtualNonBubblingListener=[],this.isolateModule.setEventDelegator(this),this.domListeners=new Map,this.domListenersToAdd=new Map,this.nonBubblingListeners=new Map,t.addListener({next:function(t){n.origin!==t&&(n.origin=t,n.resetEventListeners(),n.domListenersToAdd.forEach((function(t,e){return n.setupDOMListener(e,t)})),n.domListenersToAdd.clear()),n.nonBubblingListenersToAdd.forEach((function(t){n.setupNonBubblingListener(t)}))}})}return t.prototype.addEventListener=function(t,e,n,r){var i,s=o.a.never(),a=new b(e,this.isolateModule);if(void 0===r?-1===xt.indexOf(t):r)return this.domListeners.has(t)||this.setupDOMListener(t,!!n.passive),i=this.insertListener(s,a,t,n),s;var u=[];this.nonBubblingListenersToAdd.forEach((function(t){return u.push(t)}));for(var c=void 0,l=0,f=u.length,p=function(n){n[0];var r=n[1],o=n[2];n[3];return t===r&&g(o.namespace,e)};!c&&l<f;){var h=u[l];c=p(h)?h:c,l++}var d,v=c;if(v){var m=v[0];d=m}else{var y=new w(e,this.isolateModule);i=this.insertListener(s,a,t,n),v=[s,t,y,i],d=s,this.nonBubblingListenersToAdd.add(v),this.setupNonBubblingListener(v)}var _=this,x=null;return o.a.create({start:function(t){x=d.subscribe(t)},stop:function(){v[0];var t=v[1],e=v[2];v[3];e.call().forEach((function(e){var n=e.subs;n&&n[t]&&(n[t].unsubscribe(),delete n[t])})),_.nonBubblingListenersToAdd.delete(v),x.unsubscribe()}})},t.prototype.removeElement=function(t,e){void 0!==e&&this.virtualListeners.delete(e);var n=[];this.nonBubblingListeners.forEach((function(e,r){if(e.has(t)){n.push([r,t]);var o=t.subs;o&&Object.keys(o).forEach((function(t){o[t].unsubscribe()}))}}));for(var r=0;r<n.length;r++){var o=this.nonBubblingListeners.get(n[r][0]);o&&(o.delete(n[r][1]),0===o.size?this.nonBubblingListeners.delete(n[r][0]):this.nonBubblingListeners.set(n[r][0],o))}},t.prototype.insertListener=function(t,e,n,r){var o=[],i=e._namespace,s=i.length;do{o.push(this.getVirtualListeners(n,i,!0,s)),s--}while(s>=0&&"total"!==i[s].type);for(var a=wt({},r,{scopeChecker:e,subject:t,bubbles:!!r.bubbles,useCapture:!!r.useCapture,passive:!!r.passive}),u=0;u<o.length;u++)o[u].add(a,i.length);return a},t.prototype.getVirtualListeners=function(t,e,n,r){void 0===n&&(n=!1);var o=void 0!==r?r:e.length;if(!n)for(var i=o-1;i>=0;i--){if("total"===e[i].type){o=i+1;break}o=i}var s=this.virtualListeners.getDefault(e,(function(){return new Map}),o);return s.has(t)||s.set(t,new bt),s.get(t)},t.prototype.setupDOMListener=function(t,e){var n=this;if(this.origin){var r=h(this.origin,t,!1,!1,e).subscribe({next:function(r){return n.onEvent(t,r,e)},error:function(){},complete:function(){}});this.domListeners.set(t,{sub:r,passive:e})}else this.domListenersToAdd.set(t,e)},t.prototype.setupNonBubblingListener=function(t){t[0];var e=t[1],n=t[2],r=t[3];if(this.origin){var o=n.call();if(o.length){var i=this;o.forEach((function(t){var n,o=t.subs;if(!o||!o[e]){var s=h(t,e,!1,!1,r.passive).subscribe({next:function(t){return i.onEvent(e,t,!!r.passive,!1)},error:function(){},complete:function(){}});i.nonBubblingListeners.has(e)||i.nonBubblingListeners.set(e,new Map);var a=i.nonBubblingListeners.get(e);if(!a)return;a.set(t,{sub:s,destination:r}),t.subs=wt({},o,((n={})[e]=s,n))}}))}}},t.prototype.resetEventListeners=function(){for(var t=this.domListeners.entries(),e=t.next();!e.done;){var n=e.value,r=n[0],o=n[1],i=o.sub,s=o.passive;i.unsubscribe(),this.setupDOMListener(r,s),e=t.next()}},t.prototype.putNonBubblingListener=function(t,e,n,r){var o=this.nonBubblingListeners.get(t);if(o){var i=o.get(e);i&&i.destination.passive===r&&i.destination.useCapture===n&&(this.virtualNonBubblingListener[0]=i.destination)}},t.prototype.onEvent=function(t,e,n,r){void 0===r&&(r=!0);var o=this.patchEvent(e),i=this.isolateModule.getRootElement(e.target);if(r){var s=this.isolateModule.getNamespace(e.target);if(!s)return;var a=this.getVirtualListeners(t,s);this.bubble(t,e.target,i,o,a,s,s.length-1,!0,n),this.bubble(t,e.target,i,o,a,s,s.length-1,!1,n)}else this.putNonBubblingListener(t,e.target,!0,n),this.doBubbleStep(t,e.target,i,o,this.virtualNonBubblingListener,!0,n),this.putNonBubblingListener(t,e.target,!1,n),this.doBubbleStep(t,e.target,i,o,this.virtualNonBubblingListener,!1,n),e.stopPropagation()},t.prototype.bubble=function(t,e,n,r,o,i,s,a,u){a||r.propagationHasBeenStopped||this.doBubbleStep(t,e,n,r,o,a,u);var c=n,l=s;if(e===n){if(!(s>=0&&"sibling"===i[s].type))return;c=this.isolateModule.getElement(i,s),l--}e.parentNode&&c&&this.bubble(t,e.parentNode,c,r,o,i,l,a,u),a&&!r.propagationHasBeenStopped&&this.doBubbleStep(t,e,n,r,o,a,u)},t.prototype.doBubbleStep=function(t,e,n,r,o,i,s){n&&(this.mutateEventCurrentTarget(r,e),o.forEach((function(t){if(t.passive===s&&t.useCapture===i){var o=_(t.scopeChecker.namespace);!r.propagationHasBeenStopped&&t.scopeChecker.isDirectlyInScope(e)&&(""!==o&&e.matches(o)||""===o&&e===n)&&(d(r,t.preventDefault),t.subject.shamefullySendNext(r))}})))},t.prototype.patchEvent=function(t){var e=t;e.propagationHasBeenStopped=!1;var n=e.stopPropagation;return e.stopPropagation=function(){n.call(this),this.propagationHasBeenStopped=!0},e},t.prototype.mutateEventCurrentTarget=function(t,e){try{Object.defineProperty(t,"currentTarget",{value:e,configurable:!0})}catch(t){console.log("please use event.ownerTarget")}t.ownerTarget=e},t}();function Ot(t){return o.a.merge(t,o.a.never())}function Mt(t){return t.elm}function St(t){(console.error||console.log)(t)}function Tt(t,e){void 0===e&&(e={}),y(t);var n=e.modules||yt;!function(t){if(!Array.isArray(t))throw new Error("Optional modules option must be an array for snabbdom modules")}(n);var r,i,s=new gt,a=R([s.createModule()].concat(n)),u=o.a.create({start:function(t){"loading"===document.readyState?document.addEventListener("readystatechange",(function(){var e=document.readyState;"interactive"!==e&&"complete"!==e||(t.next(null),t.complete())})):(t.next(null),t.complete())},stop:function(){}}),c=o.a.create({start:function(t){i=new MutationObserver((function(){return t.next(null)}))},stop:function(){i.disconnect()}});return function(n,l){void 0===l&&(l="DOM"),function(t){if(!t||"function"!=typeof t.addListener||"function"!=typeof t.fold)throw new Error("The DOM driver function expects as input a Stream of virtual DOM elements")}(n);var f=o.a.create(),p=u.map((function(){var e=function(t){var e="string"==typeof t?document.querySelector(t):t;if("string"==typeof t&&null===e)throw new Error("Cannot render into unknown element `"+t+"`");return e}(t)||document.body;return r=new st(e),e})),h=n.remember();h.addListener({}),c.addListener({});var d=p.map((function(t){return o.a.merge(h.endWhen(f),f).map((function(t){return r.call(t)})).startWith((e=Object(G.toVNode)(t),e.data=e.data||{},e.data.isolate=[],e)).fold(a,Object(G.toVNode)(t)).drop(1).map(Mt).startWith(t).map((function(t){return i.observe(t,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),t})).compose(Ot);var e})).flatten(),v=B()(u,c).endWhen(f).compose($()(d)).map((function(t){return t[1]})).remember();v.addListener({error:e.reportSnabbdomError||St});var m=new Et(v,s);return new O(v,f,[],s,m,l)}}!function(){function t(t){this._mockConfig=t,t.elements?this._elements=t.elements:this._elements=Object(p.adapt)(o.a.empty())}t.prototype.elements=function(){var t=this._elements;return t._isCycleSource="MockedDOM",t},t.prototype.element=function(){var t=this.elements().filter((function(t){return t.length>0})).map((function(t){return t[0]})).remember(),e=Object(p.adapt)(t);return e._isCycleSource="MockedDOM",e},t.prototype.events=function(t,e,n){var r=this._mockConfig[t],i=Object(p.adapt)(r||o.a.empty());return i._isCycleSource="MockedDOM",i},t.prototype.select=function(e){return new t(this._mockConfig[e]||{})},t.prototype.isolateSource=function(t,e){return t.select(".___"+e)},t.prototype.isolateSink=function(t,e){return Object(p.adapt)(o.a.fromObservable(t).map((function(t){return t.sel&&-1!==t.sel.indexOf("___"+e)||(t.sel+=".___"+e),t})))}}();function At(t){return function(t){return"string"==typeof t&&t.length>0}(t)&&("."===t[0]||"#"===t[0])}function jt(t){return function(e,n,r){var o=void 0!==e,i=void 0!==n,s=void 0!==r;return At(e)?i&&s?Object(f.h)(t+e,n,r):i?Object(f.h)(t+e,n):Object(f.h)(t+e,{}):s?Object(f.h)(t+e,n,r):i?Object(f.h)(t,e,n):o?Object(f.h)(t,e):Object(f.h)(t,{})}}var Ct=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","colorProfile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotlight","feTile","feTurbulence","filter","font","fontFace","fontFaceFormat","fontFaceName","fontFaceSrc","fontFaceUri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missingGlyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Nt=jt("svg");Ct.forEach((function(t){Nt[t]=jt(t)}));var It=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","nav","noscript","object","ol","optgroup","option","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","video"],kt={SVG_TAG_NAMES:Ct,TAG_NAMES:It,svg:Nt,isSelector:At,createTagFunction:jt};It.forEach((function(t){kt[t]=jt(t)}));var Dt=kt,Lt=(Dt.svg,Dt.a,Dt.abbr,Dt.address,Dt.area,Dt.article,Dt.aside,Dt.audio,Dt.b,Dt.base,Dt.bdi,Dt.bdo,Dt.blockquote,Dt.body,Dt.br,Dt.button,Dt.canvas),Rt=(Dt.caption,Dt.cite,Dt.code,Dt.col,Dt.colgroup,Dt.dd,Dt.del,Dt.dfn,Dt.dir,Dt.div),Pt=(Dt.dl,Dt.dt,Dt.em,Dt.embed,Dt.fieldset,Dt.figcaption,Dt.figure,Dt.footer,Dt.form,Dt.h1,Dt.h2,Dt.h3,Dt.h4,Dt.h5,Dt.h6,Dt.head,Dt.header,Dt.hgroup,Dt.hr,Dt.html,Dt.i,Dt.iframe,Dt.img,Dt.input),Bt=(Dt.ins,Dt.kbd,Dt.keygen,Dt.label,Dt.legend,Dt.li,Dt.link,Dt.main,Dt.map,Dt.mark,Dt.menu,Dt.meta,Dt.nav,Dt.noscript,Dt.object,Dt.ol,Dt.optgroup,Dt.option),Ft=(Dt.p,Dt.param,Dt.pre,Dt.progress,Dt.q,Dt.rp,Dt.rt,Dt.ruby,Dt.s,Dt.samp,Dt.script,Dt.section,Dt.select),$t=(Dt.small,Dt.source,Dt.span),Gt=(Dt.strong,Dt.style,Dt.sub,Dt.sup,Dt.table,Dt.tbody,Dt.td,Dt.textarea,Dt.tfoot,Dt.th,Dt.thead,Dt.title,Dt.tr,Dt.u,Dt.ul,Dt.video);const Wt={main:{position:"absolute",left:0,top:0,width:"50px",height:"50px",background:"#000",zIndex:9999,color:"white",fontSize:"20px",fontWeight:700,padding:"6px",borderRadius:"0 0 50px 0",boxSizing:"border-box",cursor:"pointer",transition:"all 100ms ease-in",padding:"0 0 0 0"},active:{position:"absolute",left:0,top:0,width:"50px",height:"50px",background:"#000",zIndex:9999,color:"white",fontSize:"20px",fontWeight:700,padding:"6px",borderRadius:"0 0 50px 0",boxSizing:"border-box",cursor:"pointer",transition:"all 100ms ease-in",padding:"6px 0 0 0"}},Vt={position:"absolute",top:0,left:0,zIndex:100},zt={main:{position:"absolute",top:0,left:"-110vw",transition:"all 500ms ease-in-out",zIndex:999},active:{position:"absolute",top:0,left:0,transition:"all 500ms ease-in-out",zIndex:999}},Ut={position:"relative",float:"left",clear:"both",borderRadius:"0 0 0.5em 0",borderBottom:"4px solid #FFF"},Kt={position:"absolute",top:0,left:0,borderRadius:"0 0 0.5em 0"},qt={position:"relative",float:"left",clear:"both",margin:"1em 0 1em 0em",padding:"1em 1.5em 1em 1.5em",background:"black",borderRadius:"0 0.5em 0.5em 0",borderBottom:"4px solid #FFF",width:"20em"},Ht={position:"relative",float:"left",clear:"both",margin:"0.25em 0 0.25em 0",width:"100%"},Zt={position:"relative",float:"left",fontWeight:600,color:"white"},Xt={position:"relative",float:"right"},Yt={CAMERA_INFO:{},VIDEO_SIZE:{width:{exact:640},height:{exact:480}},MIN_MARKER_DISTANCE:10,MIN_MARKER_PERIMETER:.02,MAX_MARKER_PERIMETER:.8,SIZE_AFTER_PERSPECTIVE_REMOVAL:49,IMAGE_CONTRAST:0,IMAGE_BRIGHTNESS:0,IMAGE_GRAYSCALE:0};var Jt=function(t){return console.log("ya"),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(t){var e=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return e?new Promise((function(n,r){e.call(navigator,t,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),{vdom$:o.a.fromPromise((console.log("ya"),navigator.mediaDevices.getUserMedia({video:{width:Yt.VIDEO_SIZE.width,height:Yt.VIDEO_SIZE.height,deviceId:Yt.CAMERA_INFO}}))).map(t=>Gt("#beholder-video",{attrs:{autoplay:!0,src:window.URL.createObjectURL(t)},style:{display:"none"}}))}},Qt=Qt||{};Qt.Image=function(t,e,n){this.width=t||0,this.height=e||0,this.data=n||[]},Qt.grayscale=function(t,e){for(var n=t.data,r=e.data,o=n.length,i=0,s=0;i<o;i+=4)r[s++]=.299*n[i]+.587*n[i+1]+.114*n[i+2]+.5&255;return e.width=t.width,e.height=t.height,e},Qt.threshold=function(t,e,n){var r,o=t.data,i=e.data,s=o.length,a=[];for(r=0;r<256;++r)a[r]=r<=n?0:255;for(r=0;r<s;++r)i[r]=a[o[r]];return e.width=t.width,e.height=t.height,e},Qt.adaptiveThreshold=function(t,e,n,r){var o,i=t.data,s=e.data,a=i.length,u=[];for(Qt.stackBoxBlur(t,e,n),o=0;o<768;++o)u[o]=o-255<=-r?255:0;for(o=0;o<a;++o)s[o]=u[i[o]-s[o]+255];return e.width=t.width,e.height=t.height,e},Qt.otsu=function(t){var e,n,r,o=t.data,i=o.length,s=[],a=0,u=0,c=0,l=0,f=0,p=0;for(r=0;r<256;++r)s[r]=0;for(r=0;r<i;++r)s[o[r]]++;for(r=0;r<256;++r)u+=s[r]*r;for(r=0;r<256;++r)if(0!==(l+=s[r])){if(0===(f=i-l))break;(n=l*f*(e=(c+=s[r]*r)/l-(u-c)/f)*e)>p&&(p=n,a=r)}return a},Qt.stackBoxBlurMult=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265],Qt.stackBoxBlurShift=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13],Qt.BlurStack=function(){this.color=0,this.next=null},Qt.stackBoxBlur=function(t,e,n){var r,o,i,s,a,u,c,l,f,p,h=t.data,d=e.data,v=t.height,m=t.width,y=v-1,_=m-1,g=n+n+1,b=n+1,w=Qt.stackBoxBlurMult[n],x=Qt.stackBoxBlurShift[n];for(r=o=new Qt.BlurStack,p=1;p<g;++p)r=r.next=new Qt.BlurStack;for(r.next=o,a=0,f=0;f<v;++f){for(u=a,s=b*(i=h[a]),r=o,p=0;p<b;++p)r.color=i,r=r.next;for(p=1;p<b;++p)r.color=h[a+p],s+=r.color,r=r.next;for(r=o,l=0;l<m;++l)d[a++]=s*w>>>x,c=u+((c=l+b)<_?c:_),s-=r.color-h[c],r.color=h[c],r=r.next}for(l=0;l<m;++l){for(u=(a=l)+m,s=b*(i=d[a]),r=o,p=0;p<b;++p)r.color=i,r=r.next;for(p=1;p<b;++p)r.color=d[u],s+=r.color,r=r.next,u+=m;for(r=o,f=0;f<v;++f)d[a]=s*w>>>x,c=l+((c=f+b)<y?c:y)*m,s-=r.color-d[c],r.color=d[c],r=r.next,a+=m}return e},Qt.gaussianBlur=function(t,e,n,r){var o=Qt.gaussianKernel(r);return e.width=t.width,e.height=t.height,n.width=t.width,n.height=t.height,Qt.gaussianBlurFilter(t,n,o,!0),Qt.gaussianBlurFilter(n,e,o,!1),e},Qt.findContours=function(t,e){var n,r,o,i,s,a,u,c,l,f=t.width,p=t.height,h=[];for(n=Qt.binaryBorder(t,e),r=Qt.neighborhoodDeltas(f+2),o=f+3,s=1,c=0;c<p;++c,o+=2)for(l=0;l<f;++l,++o)0!==(i=n[o])&&(a=u=!1,1===i&&0===n[o-1]?a=!0:i>=1&&0===n[o+1]&&(u=!0),(a||u)&&(++s,h.push(Qt.borderFollowing(n,o,s,{x:l,y:c},u,r))));return h},Qt.borderFollowing=function(t,e,n,r,o,i){var s,a,u,c,l,f=[];f.hole=o,c=l=o?0:4;do{if(0!==t[s=e+i[c=c-1&7]])break}while(c!==l);if(c===l)t[e]=-n,f.push({x:r.x,y:r.y});else for(a=e,4^c;;){l=c;do{u=a+i[++c]}while(0===t[u]);if((c&=7)-1>>>0<l>>>0?t[a]=-n:1===t[a]&&(t[a]=n),f.push({x:r.x,y:r.y}),c,r.x+=Qt.neighborhood[c][0],r.y+=Qt.neighborhood[c][1],u===e&&a===s)break;a=u,c=c+4&7}return f},Qt.neighborhood=[[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1],[0,1],[1,1]],Qt.neighborhoodDeltas=function(t){for(var e=[],n=Qt.neighborhood.length,r=0;r<n;++r)e[r]=Qt.neighborhood[r][0]+Qt.neighborhood[r][1]*t;return e.concat(e)},Qt.approxPolyDP=function(t,e){var n,r,o,i,s,a,u,c,l,f,p,h={start_index:0,end_index:0},d={start_index:0,end_index:0},v=[],m=[],y=t.length;for(e*=e,p=0,l=0;l<3;++l)for(s=0,r=t[p=(p+d.start_index)%y],++p===y&&(p=0),f=1;f<y;++f)n=t[p],++p===y&&(p=0),(i=(u=n.x-r.x)*u+(c=n.y-r.y)*c)>s&&(s=i,d.start_index=f);for(s<=e?v.push({x:r.x,y:r.y}):(h.start_index=p,h.end_index=d.start_index+=h.start_index,d.start_index-=d.start_index>=y?y:0,d.end_index=h.start_index,d.end_index<d.start_index&&(d.end_index+=y),m.push({start_index:d.start_index,end_index:d.end_index}),m.push({start_index:h.start_index,end_index:h.end_index}));0!==m.length;){if(o=t[(h=m.pop()).end_index%y],r=t[p=h.start_index%y],++p===y&&(p=0),h.end_index<=h.start_index+1)a=!0;else{for(s=0,u=o.x-r.x,c=o.y-r.y,l=h.start_index+1;l<h.end_index;++l)n=t[p],++p===y&&(p=0),(i=Math.abs((n.y-r.y)*u-(n.x-r.x)*c))>s&&(s=i,d.start_index=l);a=s*s<=e*(u*u+c*c)}a?v.push({x:r.x,y:r.y}):(d.end_index=h.end_index,h.end_index=d.start_index,m.push({start_index:d.start_index,end_index:d.end_index}),m.push({start_index:h.start_index,end_index:h.end_index}))}return v},Qt.warp=function(t,e,n,r){var o,i,s,a,u,c,l,f,p,h,d,v,m,y,_,g,b,w,x,E,O,M,S=t.data,T=e.data,A=t.width,j=t.height,C=0;for(m=(v=Qt.getPerspectiveTransform(n,r-1))[8],y=v[2],_=v[5],O=0;O<r;++O)for(g=m+=v[7],b=y+=v[1],w=_+=v[4],M=0;M<r;++M)g+=v[6],i=(o=(x=(b+=v[0])/g)>>>0)===A-1?o:o+1,a=1-(s=x-o),l=1-(c=(E=(w+=v[3])/g)-(u=E>>>0)),f=p=u*A,h=d=(u===j-1?u:u+1)*A,T[C++]=l*(a*S[f+o]+s*S[p+i])+c*(a*S[h+o]+s*S[d+i])&255;return e.width=r,e.height=r,e},Qt.getPerspectiveTransform=function(t,e){var n=Qt.square2quad(t);return n[0]/=e,n[1]/=e,n[3]/=e,n[4]/=e,n[6]/=e,n[7]/=e,n},Qt.square2quad=function(t){var e,n,r,o,i,s,a,u=[];return e=t[0].x-t[1].x+t[2].x-t[3].x,n=t[0].y-t[1].y+t[2].y-t[3].y,0===e&&0===n?(u[0]=t[1].x-t[0].x,u[1]=t[2].x-t[1].x,u[2]=t[0].x,u[3]=t[1].y-t[0].y,u[4]=t[2].y-t[1].y,u[5]=t[0].y,u[6]=0,u[7]=0,u[8]=1):(r=t[1].x-t[2].x,o=t[3].x-t[2].x,i=t[1].y-t[2].y,a=r*(s=t[3].y-t[2].y)-o*i,u[6]=(e*s-o*n)/a,u[7]=(r*n-e*i)/a,u[8]=1,u[0]=t[1].x-t[0].x+u[6]*t[1].x,u[1]=t[3].x-t[0].x+u[7]*t[3].x,u[2]=t[0].x,u[3]=t[1].y-t[0].y+u[6]*t[1].y,u[4]=t[3].y-t[0].y+u[7]*t[3].y,u[5]=t[0].y),u},Qt.isContourConvex=function(t){var e,n,r,o,i,s,a,u,c=0,l=!0,f=t.length,p=0,h=0;for(n=t[f-1],i=(e=t[0]).x-n.x,s=e.y-n.y;p<f;++p){if(++h===f&&(h=0),n=e,a=(e=t[h]).x-n.x,3===(c|=(o=(u=e.y-n.y)*i)>(r=a*s)?1:o<r?2:3)){l=!1;break}i=a,s=u}return l},Qt.perimeter=function(t){for(var e,n,r=t.length,o=0,i=r-1,s=0;o<r;i=o++)e=t[o].x-t[i].x,n=t[o].y-t[i].y,s+=Math.sqrt(e*e+n*n);return s},Qt.minEdgeLength=function(t){for(var e,n,r,o=t.length,i=0,s=o-1,a=1/0;i<o;s=i++)(e=(n=t[i].x-t[s].x)*n+(r=t[i].y-t[s].y)*r)<a&&(a=e);return Math.sqrt(a)},Qt.countNonZero=function(t,e){var n,r,o=t.data,i=e.height,s=e.width,a=e.x+e.y*t.width,u=t.width-s,c=0;for(n=0;n<i;++n){for(r=0;r<s;++r)0!==o[a++]&&++c;a+=u}return c},Qt.binaryBorder=function(t,e){var n,r,o=t.data,i=t.height,s=t.width,a=0,u=0;for(r=-2;r<s;++r)e[u++]=0;for(n=0;n<i;++n){for(e[u++]=0,r=0;r<s;++r)e[u++]=0===o[a++]?0:1;e[u++]=0}for(r=-2;r<s;++r)e[u++]=0;return e};var te=Qt;function ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ee(Object(n),!0).forEach((function(e){re(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function re(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const oe={};let ie={MIN_MARKER_DISTANCE:10,MIN_MARKER_PERIMETER:.2,MAX_MARKER_PERIMETER:.8,SIZE_AFTER_PERSPECTIVE_REMOVAL:49};oe.setCameraParams=t=>{ie=ne(ne({},ie),t)},oe.Marker=(t,e)=>{const n=(e[0].y-e[2].y)/(e[0].x-e[2].x),r=(e[1].y-e[3].y)/(e[1].x-e[3].x),o={x:0,y:0};return o.x=function(t,e,n,r){return(n.y-r.y+e*r.x-t*n.x)/(e-t)}(n,r,e[0],e[1]),o.y=function(t,e,n){return e*(n-t.x)+t.y}(e[0],n,o.x),{id:t,corners:e,center:o}},oe.Detector=function(){this.grey=new te.Image,this.thres=new te.Image,this.homography=new te.Image,this.binary=[],this.contours=[],this.polys=[],this.candidates=[]},oe.Detector.prototype.detect=function(t,e){return te.grayscale(t,this.grey),te.adaptiveThreshold(this.grey,this.thres,2,7),this.contours=te.findContours(this.thres,this.binary),this.candidates=this.findCandidates(this.contours,t.width*e.MIN_MARKER_PERIMETER,t.width*e.MAX_MARKER_PERIMETER,.05,10),this.candidates=this.clockwiseCorners(this.candidates),this.candidates=this.notTooNear(this.candidates,e.MIN_MARKER_DISTANCE),this.findMarkers(this.grey,this.candidates,e.SIZE_AFTER_PERSPECTIVE_REMOVAL)},oe.Detector.prototype.findCandidates=function(t,e,n,r,o){var i,s,a,u=[],c=t.length;for(this.polys=[],a=0;a<c;++a)(i=t[a]).length>=e&&i.length<=n&&(s=te.approxPolyDP(i,i.length*r),this.polys.push(s),4===s.length&&te.isContourConvex(s)&&te.minEdgeLength(s)>=o&&u.push(s));return u},oe.Detector.prototype.clockwiseCorners=function(t){var e,n,r,o,i,s=t.length;for(i=0;i<s;++i)e=t[i][1].x-t[i][0].x,r=t[i][1].y-t[i][0].y,n=t[i][2].x-t[i][0].x,e*(t[i][2].y-t[i][0].y)-r*n<0&&(o=t[i][1],t[i][1]=t[i][3],t[i][3]=o);return t},oe.Detector.prototype.notTooNear=function(t,e){var n,r,o,i,s,a,u=[],c=t.length;for(i=0;i<c;++i)for(s=i+1;s<c;++s){for(n=0,a=0;a<4;++a)n+=(r=t[i][a].x-t[s][a].x)*r+(o=t[i][a].y-t[s][a].y)*o;n/4<e*e&&(te.perimeter(t[i])<te.perimeter(t[s])?t[i].tooNear=!0:t[s].tooNear=!0)}for(i=0;i<c;++i)t[i].tooNear||u.push(t[i]);return u},oe.Detector.prototype.findMarkers=function(t,e,n){var r,o,i,s=[],a=e.length;for(i=0;i<a;++i)r=e[i],te.warp(t,this.homography,r,n),te.threshold(this.homography,this.homography,te.otsu(this.homography)),(o=this.getMarker(this.homography,r))&&s.push(o);return s},oe.Detector.prototype.getMarker=function(t,e){var n,r,o,i,s,a=t.width/7>>>0,u=a*a>>1,c=[],l=[],f=[];for(i=0;i<7;++i)for(o=0===i||6===i?1:6,s=0;s<7;s+=o)if(n={x:s*a,y:i*a,width:a,height:a},te.countNonZero(t,n)>u)return null;for(i=0;i<5;++i)for(c[i]=[],s=0;s<5;++s)n={x:(s+1)*a,y:(i+1)*a,width:a,height:a},c[i][s]=te.countNonZero(t,n)>u?1:0;for(l[0]=c,f[0]=this.hammingDistance(l[0]),r={first:f[0],second:0},i=1;i<4;++i)l[i]=this.rotate(l[i-1]),f[i]=this.hammingDistance(l[i]),f[i]<r.first&&(r.first=f[i],r.second=i);return 0!==r.first?null:oe.Marker(this.mat2id(l[r.second]),this.rotate2(e,4-r.second))},oe.Detector.prototype.hammingDistance=function(t){var e,n,r,o,i,s=[[1,0,0,0,0],[1,0,1,1,1],[0,1,0,0,1],[0,1,1,1,0]],a=0;for(r=0;r<5;++r){for(n=1/0,o=0;o<4;++o){for(e=0,i=0;i<5;++i)e+=t[r][i]===s[o][i]?0:1;e<n&&(n=e)}a+=n}return a},oe.Detector.prototype.mat2id=function(t){var e,n=0;for(e=0;e<5;++e)n<<=1,n|=t[e][1],n<<=1,n|=t[e][3];return n},oe.Detector.prototype.rotate=function(t){var e,n,r=[],o=t.length;for(e=0;e<o;++e)for(r[e]=[],n=0;n<t[e].length;++n)r[e][n]=t[t[e].length-n-1][e];return r},oe.Detector.prototype.rotate2=function(t,e){var n,r=[],o=t.length;for(n=0;n<o;++n)r[n]=t[(e+n)%o];return r};var se=oe;var ae=function(t){const e=DOM.select("#detection-canvas").element(),n=e.map(t=>t.getContext("2d")),r=DOM.select("#beholder-video").element();let i=Date.now();const s=t.update.map(()=>{const t=Date.now(),e=t-i;return i=t,e}),a=new se.Detector,u=o.a.combine(e,n,s,r).map((t,e,n,r)=>{if(r.readyState===r.HAVE_ENOUGH_DATA){e.drawImage(video,0,0,t.width,t.height);let n=e.getImageData(0,0,t.width,t.height);return a.detect(n,detectionParams)}return[]});return u.subscribe({next:t=>console.log(t),complete:t=>console.log("complete",t)}),{marker$:u}};function ue(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ce(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function le(t){const e=o.a.merge(t.DOM.select("#toggle-screen").events("mouseover").mapTo(!0),t.DOM.select("#toggle-screen").events("mouseout").mapTo(!1)).startWith(!1),n=t.DOM.select("#toggle-screen").events("click").fold(t=>!t,!0),r=Jt(t),i=(ae(t),o.a.combine(e,n)),s=r.vdom$.map(t=>[t]);return{DOM:o.a.combine(i,s).map(t=>{let e=ue(t,2),n=ue(e[0],2),r=n[0],o=n[1],i=e[1];return Rt("#beholder-overlay",{style:Vt},[...i,Rt("#toggle-screen",{style:r?Wt.main:Wt.active},"⥂"),Rt("#detection-panel",{style:o?zt.main:zt.active},[Lt("#detection-canvas",{style:Ut}),Lt("#detection-canvas-overlay",{style:Kt}),Rt("#parameters-menu",{style:qt},[Rt(".parameter-item",{style:Ht},[$t({style:Zt},"Camera Feed ID"),Ft("#CAMERA_INDEX",{style:Xt},[Bt({attrs:{value:0,label:0,selected:!0}})])]),Rt(".parameter-item",{style:Ht},[$t({style:Zt},"Video Size"),Ft("#VIDEO_SIZE_INDEX",{style:Xt},[Bt({attrs:{value:0,label:"320 x 240",selected:!1}}),Bt({attrs:{value:1,label:"640 x 480",selected:!0}}),Bt({attrs:{value:2,label:"1280 x 720",selected:!1}}),Bt({attrs:{value:3,label:"1920 x 1080",selected:!1}})])]),Rt(".parameter-item",{style:Ht},[$t({style:Zt},"Min Marker Distance"),Pt("#MIN_MARKER_DISTANCE",{style:Xt,attrs:{type:"number",name:"MIN_MARKER_DISTANCE",min:1,max:50,value:10,step:1}})]),Rt(".parameter-item",{style:Ht},[$t({style:Zt},"Min Marker Perimeter"),Pt("#MIN_MARKER_PERIMETER",{style:Xt,attrs:{type:"number",name:"MIN_MARKER_PERIMETER",min:1,max:50,value:10,step:1}})]),Rt(".parameter-item",{style:Ht},[$t({style:Zt},"Max Marker Perimeter"),Pt("#MAX_MARKER_PERIMETER",{style:Xt,attrs:{type:"number",name:"MAX_MARKER_PERIMETER",min:1,max:50,value:10,step:1}})]),Rt(".parameter-item",{style:Ht},[$t({style:Zt},"Size After Perspective Removal"),Pt("#SIZE_AFTER_PERSPECTIVE_REMOVAL",{style:Xt,attrs:{type:"number",name:"SIZE_AFTER_PERSPECTIVE_REMOVAL",min:1,max:200,value:49,step:1}})]),Rt(".parameter-item",{style:Ht},[$t({style:Zt},"Contrast"),Pt("#IMAGE_CONTRAST",{style:Xt,attrs:{type:"number",name:"IMAGE_CONTRAST",min:-100,max:100,value:0,step:1}})]),Rt(".parameter-item",{style:Ht},[$t({style:Zt},"Brightness"),Pt("#IMAGE_BRIGHTNESS",{style:Xt,attrs:{type:"number",name:"IMAGE_BRIGHTNESS",min:-100,max:100,value:0,step:1}})]),Rt(".parameter-item",{style:Ht},[$t({style:Zt},"Grayscale"),Pt("#IMAGE_GRAYSCALE",{style:Xt,attrs:{type:"number",name:"IMAGE_GRAYSCALE",min:0,max:100,value:0,step:1}})])])])])})}}let fe;const pe=()=>o.a.create({start:t=>{fe=()=>{t.next()}},stop:()=>{}}),he=()=>{fe()},de=t=>{l(le,{DOM:Tt(t),update:pe})};e.default={init:de,update:he}}])}));